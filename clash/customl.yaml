port: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7893
allow-lan: true
tcp-concurrent: true
unified-delay: false
mode: Rule
log-level: info
external-controller: ":9990"
clash-for-android:
  append-system-dns: false
hosts:
  mtalk.google.com: 108.177.125.188
  raw.githubusercontent.com: 151.101.76.133
profile:
  store-selected: true
  store-fake-ip: true
sniffer:
  enable: true
  sniff:
    TLS:
      ports: [443, 8443]
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
tun:
  enable: false
  stack: system
  dns-hijack:
    - 'any:53'
  auto-route: true
  auto-detect-interface: true

geodata-mode: true
geox-url:
  geoip: "https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat"
  geosite: "https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat"
  mmdb: "https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb"
find-process-mode: strict
global-client-fingerprint: chrome

dns:
  enabled: true
  ipv6: false
  listen: 127.0.0.1:53
  enhanced-mode: fake-ip
  # fake-ip-range: 28.0.0.1/8 ?
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*'
    - '+.lan'
    - '+.local'
  use-hosts: true
  nameserver-policy:
    "*.google.com": 8.8.8.8
    "*.tailscale.io": 8.8.8.8
    "*.googleusercontent.com": 223.5.5.5
    "*.tw": 1.1.1.1
    testflight.apple.com: 8.8.8.8
    "*.tmall.com": 223.5.5.5
    "*.taobao.com": 223.5.5.5
    "*.alicdn.com": 223.5.5.5
    "*.aliyun.com": 223.5.5.5
    "*.alipay*.com": 223.5.5.5
    "*.alibaba*.com": 223.5.5.5
    "*.alimama*.com": 223.5.5.5
    "*.qq.com": 114.114.114.114
    "*.tencent.com": 114.114.114.114
    "*.weixin.com": 114.114.114.114
    "*.qpic.cn": 114.114.114.114
    "*.jd.com": 114.114.114.114
    "*.bilibili.com": 114.114.114.114
    hdslb.com: 114.114.114.114
    "*.163.com": 119.29.29.29
    "*.126.com": 119.29.29.29
    "*.126.net": 114.114.114.114
    "*.127.net": 114.114.114.114
    "*.netease.com": 114.114.114.114
    "*.10010.com": 114.114.114.114
    "*.unicompayment.com": 114.114.114.114
    "*.ximalaya.com": 114.114.114.114
    "*.baidu.com": 114.114.114.114
    "*.bdstatic.com": 114.114.114.114
    "geosite:private":
      - https://doh.pub/dns-query
      - https://dns.alidns.com/dns-query
    "geosite:geolocation-!cn":
      - 'https://dns.cloudflare.com/dns-query#dns'
      - 'https://dns.google/dns-query#dns'
  default-nameserver:
    - 180.76.76.76
    - 223.5.5.5
    - 119.29.29.29
  nameserver:
    - "192.168.10.254"
    - "https://doh.pub/dns-query"
    - "https://223.5.5.5/dns-query"
    - https://dns.alidns.com/dns-query
  proxy-server-nameserver:
    - https://doh.pub/dns-query
  fallback:
    - tls://1.1.1.1:853
    - tls://1.0.0.1:853
    - 101.6.6.6:5353
    - https://dns.cloudflare.com/dns-query
    - https://doh.mullvad.net/dns-query
    - "https://doh.dns.sb/dns-query"
    - "https://1.1.1.1/dns-query"
    - "tls://8.8.4.4:853"
  fallback-filter:
    geoip: true
    ipcidr:
      - 240.0.0.0/4
      - 0.0.0.0/32
# 节点配置文件统一存放在 ./profiles/proxies/ 目录中

proxy-providers:
  # 从链接导入的配置文件（支持多个Clash 订阅链接）
  Fcloud1:
    type: http
    path: ./profiles/proxies/xxx.yaml
    url: https://xxxxxxxxxxxxx
    # 更新配置文件
    interval: 3600
    health-check:
      # 选中时是否进行测试
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 600
      lazy: true
  Fcloud2:
    type: http
    path: ./profiles/proxies/xxx.yaml
    url: https://xxxxxxxxxxxxx
    # 更新配置文件
    interval: 3600
    health-check:
      # 选中时是否进行测试
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 600
      lazy: true

  tag:
    type: http
    path: ./profiles/proxies/xxx.yaml
    url: https://xxxxxxxxxxxxx
    # 更新配置文件
    interval: 3600
    health-check:
      # 选中时是否进行测试
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 600
      lazy: true
proxies:
  # - name: "WARP"
  #   type: wireguard
  #   server: engage.cloudflareclient.com
  #   port: 2408
  #   ip: "172.16.0.2/32"
  #   ipv6: "2606::1/128"        # 自行替换
  #   private-key: "private-key" # 自行替换
  #   public-key: "public-key"   # 自行替换
  #   udp: true
  #   reserved: "abba"           # 自行替换
  #   mtu: 1280
  #   dialer-proxy: "dns"
  #   remote-dns-resolve: true
  #   dns:
  #     - https://dns.cloudflare.com/dns-query

proxy-groups:
  - name: tag-select
    type: select
    url: http://www.gstatic.com/generate_204
    # interval: 3600
    use: # 引入proxy-provider 使用 use 关键字
      - tag
    proxies:
      - DIRECT
  - name: Fcloud1-select
    type: select
    url: http://www.gstatic.com/generate_204
    # interval: 3600
    use: # 引入proxy-provider 使用 use 关键字
      - Fcloud1
    proxies:
      - DIRECT
  - name: Fcloud2-select
    type: select
    url: http://www.gstatic.com/generate_204
    # interval: 3600
    use: # 引入proxy-provider 使用 use 关键字
      - Fcloud2
    proxies:
      - DIRECT
  - name: PROXY
    type: select
    url: http://www.gstatic.com/generate_204
    proxies:
      - DIRECT
      - tag-select
      - Fcloud1-select
      - Fcloud2-select
  - name: OPENAI
    type: select
    url: http://www.gstatic.com/generate_204
    # interval: 3600
    use: # 引入proxy-provider 使用 use 关键字
      - Fcloud1
      - Fcloud2
      - tag
  - name: 香港节点
    type: select
    url: http://www.gstatic.com/generate_204
    # interval: 3600
    use: # 引入proxy-provider 使用 use 关键字
      - Fcloud1
      - Fcloud2
      - tag
    filter: 'HK|香港'
    proxies:
      - DIRECT
  - name: 美国节点
    type: select
    url: http://www.gstatic.com/generate_204
    # interval: 3600
    use: # 引入proxy-provider 使用 use 关键字
      - Fcloud1
      - Fcloud2
      - tag
    filter: 'US|美国'
    proxies:
      - DIRECT
  - name: 日本节点
    type: select
    url: http://www.gstatic.com/generate_204
    # interval: 3600
    use: # 引入proxy-provider 使用 use 关键字
      - Fcloud1
      - Fcloud2
      - tag
    filter: '(?i)JP|日本'
    proxies:
      - DIRECT

rule-providers:
  reject:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/reject.txt"
    path: ./profiles/ruleset/reject.yaml
    interval: 86400
bypass: # not work in tun mode
  # 直连列表
  # MyList
  - "*.423down.com"
  - "*.bitwarden.com"
  - "*.chaipip.com"
  - "*.hrtsea.com"
  - "*.laomo.me"
  - "*.mpyit.com"
  # CN域名直连
  - "*.cn"
  - "localhost"
  - 127.*
  - 10.*
  - 172.16.*
  - 172.17.*
  - 172.18.*
  - 172.19.*
  - 172.20.*
  - 172.21.*
  - 172.22.*
  - 172.23.*
  - 172.24.*
  - 172.25.*
  - 172.26.*
  - 172.27.*
  - 172.28.*
  - 172.29.*
  - 172.30.*
  - 172.31.*
  - 192.168.*
rules:
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT
  - PROCESS-NAME,v2ray,DIRECT
  - PROCESS-NAME,xray,DIRECT
  - PROCESS-NAME,naive,DIRECT
  - PROCESS-NAME,trojan,DIRECT
  - PROCESS-NAME,trojan-go,DIRECT
  - PROCESS-NAME,ss-local,DIRECT
  - PROCESS-NAME,privoxy,DIRECT
  - PROCESS-NAME,leaf,DIRECT
  - PROCESS-NAME,v2ray.exe,DIRECT
  - PROCESS-NAME,xray.exe,DIRECT
  - PROCESS-NAME,naive.exe,DIRECT
  - PROCESS-NAME,trojan.exe,DIRECT
  - PROCESS-NAME,trojan-go.exe,DIRECT
  - PROCESS-NAME,ss-local.exe,DIRECT
  - PROCESS-NAME,privoxy.exe,DIRECT
  - PROCESS-NAME,leaf.exe,DIRECT
  - PROCESS-NAME,Surge,DIRECT
  - PROCESS-NAME,Surge 2,DIRECT
  - PROCESS-NAME,Surge 3,DIRECT
  - PROCESS-NAME,Surge 4,DIRECT
  - PROCESS-NAME,Surge%202,DIRECT
  - PROCESS-NAME,Surge%203,DIRECT
  - PROCESS-NAME,Surge%204,DIRECT
  - PROCESS-NAME,Thunder,DIRECT
  - PROCESS-NAME,DownloadService,DIRECT
  - PROCESS-NAME,qBittorrent,DIRECT
  - PROCESS-NAME,Transmission,DIRECT
  - PROCESS-NAME,fdm,DIRECT
  - PROCESS-NAME,aria2c,DIRECT
  - PROCESS-NAME,Folx,DIRECT
  - PROCESS-NAME,NetTransport,DIRECT
  - PROCESS-NAME,uTorrent,DIRECT
  - PROCESS-NAME,WebTorrent,DIRECT
  - PROCESS-NAME,aria2c.exe,DIRECT
  - PROCESS-NAME,BitComet.exe,DIRECT
  - PROCESS-NAME,fdm.exe,DIRECT
  - PROCESS-NAME,NetTransport.exe,DIRECT
  - PROCESS-NAME,qbittorrent.exe,DIRECT
  - PROCESS-NAME,Thunder.exe,DIRECT
  - PROCESS-NAME,ThunderVIP.exe,DIRECT
  - PROCESS-NAME,transmission-daemon.exe,DIRECT
  - PROCESS-NAME,transmission-qt.exe,DIRECT
  - PROCESS-NAME,uTorrent.exe,DIRECT
  - PROCESS-NAME,WebTorrent.exe,DIRECT
  - PROCESS-NAME,Tailscale.exe,DIRECT
  - PROCESS-NAME,Tailscale Service.exe,DIRECT
  - PROCESS-NAME,tailscaled.exe,DIRECT
  # - PROCESS-NAME,tailscale-ipn.exe,DIRECT
  - RULE-SET,reject,REJECT
  - DOMAIN-SUFFIX,tailscale.com,DIRECT
  - DOMAIN-SUFFIX,cn,DIRECT
  - DOMAIN,clash.razord.top,DIRECT
  - DOMAIN,yacd.haishan.me,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,PROXY

